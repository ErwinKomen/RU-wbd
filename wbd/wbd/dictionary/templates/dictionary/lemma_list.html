{% extends "dictionary/layout.html" %}

{% block content %}

    <div class="panel panel-default">
      <form name='lemmasearch' id='lemmasearch' action="" method='get' >
        {% csrf_token %}
          <!-- EK: A sort-order specification is in a hidden form field, which is filled by JS:do_sort_column() -->
          <div class="hidden">
              <input name='sortOrder' class='form-control' value='gloss' >
              <input name='search_type' class='form-control' value='lemma'>
              <input id="submit_type" name='submit_type' class='form-control' value='simple'>
          </div>

          {% include 'dictionary/dialectviewing.html' %}

          <!-- The top layer of searching -->
          <div class="row"><table><tr><td>&nbsp;</td></tr></table></div>


          <div id="searchdefault" class="row">
            <div class="col-sm-4">
              <label>&nbsp;</label>
              <div class='input-group'>
                <label class='input-group-addon' 
                        data-toggle="popover" data-trigger="hover"
                        data-placement="right" data-content="Willekeurige tekens: ? (één) * (0 of meer). Groep tekens: [m-n]"
                        for='id_entry'>{{searchform.search.label}}</label>
                <input name='search' class='form-control' {% if searchform.search.value %}value='{{searchform.search.value}}'{% endif %}>
              </div>
            </div>
            <div class="col-sm-4 col-sm-offset-2">
              <div><label>&nbsp;</label></div>
              <div class='btn-group'>
                  <!-- Make sure no button has the *name* 'submit', otherwise submit() cannot be used -->
                  <input class='btn btn-primary btn-xs' onclick="do_search(this, 'lemma', 'simple');" value="Zoek">
                  <input class='btn btn-default btn-xs' onclick="do_search(this, 'lemma', 'Herstel');" value="Herstel">
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" 
                      aria-haspopup="true" aria-expanded="false">Download <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li><a href="#" onclick="do_search(this, 'lemma', 'Csv');" >Tab gescheiden lijst</a></li>
                    <li><a href="#" onclick="do_search(this, 'lemma', 'Excel');" >Excel</a></li>
                    <li><a href="#" onclick="do_search(this, 'lemma', 'Html');" >Html</a></li>
                  </ul>
              </div>
            </div>
            <div class="col-sm-2">
              <div class='form-group' id='paginate_by'>
                <label for='paginate_by'>Per pagina</label>
                <select class='form-control' name="paginate_by">
                  {% for pag in paginateValues %}
                  <option {% if pag == paginateSize %} selected {% endif %}>{{pag}}</option>
                  {% endfor %}
                </select>
              </div>
            </div>
          </div>

          <!-- Collapsable area for fine-tuning -->
          <div class="row"><table><tr><td>&nbsp;</td></tr></table></div>
          <div class="panel panel-default">

            <div class="panel-heading" data-toggle="collapse" data-target="#query-area">
              <span>Filteren...</span>
              <span class="filter-summary">
                <span class="filter-item">{% if searchform.dialectCode.value %}dialect={{searchform.dialectCode.value}}{% endif %}</span>
                <span class="filter-item">{% if searchform.woord.value %}woord={{searchform.woord.value}}{% endif %}</span>
                <span class="filter-item">{% if searchform.dialectCity.value %}plaats={{searchform.dialectCity.value}}{% endif %}</span>
                <span class="filter-item">{% if afl %}aflevering={{afl}}{% endif %}</span>
              </span>
            </div>

            <!-- class="collapse" -->
            <div id="query-area" class="collapse {% if not request.GET.search %} inert {% endif %}">


              <div id='searchformwell' class='well search-results-collapsable'>

                  <table class='table'>
                      <tr>
                        <td>
                          <div class='input-group'>
                            <label class='input-group-addon' for='id_code'>{{searchform.dialectCode.label}}</label>
                            <input name='dialectCode' class='form-control' {% if searchform.dialectCode.value %}value='{{searchform.dialectCode.value}}'{% endif %}>
                          </div>
                          <div><label>&nbsp;</label></div>
                          <div class='input-group'>
                              <label class='input-group-addon' 
                                      data-toggle="popover" data-trigger="hover"
                                      data-placement="right" data-content="Willekeurige tekens: ? (één) * (0 of meer). Groep tekens: [m-n]"
                                      for='id_woord'>{{searchform.woord.label}}</label>
                              <input name='woord' class='form-control' {% if searchform.woord.value %}value='{{searchform.woord.value}}'{% endif %}>
                          </div>
                        </td>
                        <td>
                          <div class='input-group'>
                            <label class='input-group-addon' for='id_city'>{{searchform.dialectCity.label}}</label>
                            <input name='dialectCity' class='form-control' {% if searchform.dialectCity.value %}value='{{searchform.dialectCity.value}}'{% endif %}>
                          </div>
                          <div><label>&nbsp;</label></div>
                          <div class='input-group'>
                            <label class='input-group-addon' for='aflevering'>{{searchform.aflevering.label}}</label>
                            <select class='form-control' name="aflevering">
                                <option value="0">-</option>
                              {% for opt in afleveringen %}
                                <option {% if opt.id == aflkeuze %} selected {% endif %} value="{{opt.id}}">{{opt.get_summary}}</option>
                              {% endfor %}
                            </select>
                          </div>
                        </td>
                      </tr>

                  </table>





            </div>
          </div>
          </div>
      </form>
    </div>

    <div id="lemma_list_msg"><!-- Room for any error messages --></div>
    <div id="lemma_list_oview">
      {% include 'dictionary/lemma_list_oview.html' %}
    </div>


{% endblock content %}

